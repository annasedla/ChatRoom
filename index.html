<!doctype html>
<html>
<head>
  <link href="normalize.css" rel="stylesheet">
  <title>Socket.IO chat</title>
  <style>
  @import url('https://fonts.googleapis.com/css?family=Roboto');    

  * { 
    margin: 0; 
    padding: 0; 
    box-sizing: border-box; 
  }

  body { 
    font-family: 'Roboto', sans-serif;
  }

  form { 
    background: #000; 
    padding: 8px; 
    position: fixed; 
    bottom: 10; 
    width: 100%; 
  }

  form input { 
    border: 0; 
    border-radius: 25px;
    padding: 10px; 
    width: 90%; 
    margin-right: .5%; 
  }

  button { 
    border-radius: 25px;
    width: 9%; 
    background: rgb(0, 168, 107); 
    border: none; 
    padding: 10px; 
  }

  #messages { 
    list-style-type: none; 
    margin: 0; 
    padding: 0; 
  }

  #messages li { 
    padding: 5px 10px; 
  }

  #messages li:nth-child(odd) { 
    background: #eee; 
  }
  </style>
</head>

<script> var name = prompt("Please enter your name", "User1"); </script>

<body>
  <ul id="messages"></ul>
  <form action="">
    <input id="buttons" autocomplete="off" /><button>Send</button>
    <input type='button' class='chat' value='Default' onclick="switch_chat('Default')" />
    <input type='button' class='chat' value='School' onclick="switch_chat('test_room_1')" />
    <input type='button' class='chat' value='Family' onclick="switch_chat('test_room_1')" />
    <input type='button' class='chat' value='Work' onclick="switch_chat('test_room_1')" />
  </form>
</body>

<script src="/socket.io/socket.io.js"></script>
<script src="https://code.jquery.com/jquery-1.11.1.js"></script>

<script>

$(function () {

  var socket = io();
  var this_log = [];
  var current_chat = 'Default';
  var all_chats = [];
  var formatted_chats = '';

    //socket.emit('join chat', name); //TODO

    $('form').submit(function(){
      socket.emit('chat message', $('#buttons').val());
      $('#buttons').val('');
      return false;
    });

    //chat messages
    socket.on('chat message', function(msg){
      $('#messages').append($('<li>').text(msg));
    });

/*
    function update_chats(){
      //update chat buttons
      var displayed_chats = [];
      for (var i = 0; i < all_chats.length; i++){
        if (all_chats[i] != current_chat){
          displayed_chats.push(all_chats[i]);
        }
      }

      for (var i = 0; i < displayed_chats.length; i++){
        formatted_chats = formatted_chats + "<input type='button' class='chat' value='"+ rooms_to_display[i] +"' onclick=\"switch_chat('"+rooms_to_display[i]+"')\" />";
      }

      $('#buttons').html(formatted_chats);
    }*/
  });

</script>
